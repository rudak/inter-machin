<?php

namespace AppBundle\Repository\Stats;

/**
 * ResourceStatusRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ResourceStatusRepository extends \Doctrine\ORM\EntityRepository
{

    public function getResourcesEvolution(\DateTime $fromDate)
    {
        $qb = $this->createQueryBuilder('s')
                   ->addSelect('r')
                   ->leftJoin('s.resource', 'r')
                   ->where('s.date > :date')
                   ->setParameters([
                       'date' => $fromDate,
                   ])
                   ->orderBy('s.date', 'DESC')
                   ->getQuery()
        ;
        return $qb->execute();
    }
}
